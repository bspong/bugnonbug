data: URIs not supported for sherlock search icon
Created attachment 317446
Example using Mozilla.org search

When using window.sidebar.addSearchEngine to add Sherlock search engines, the data scheme is not accepted for the icon URL.

For example,

javascript:window.sidebar.addSearchEngine("http://www.google.com/mozilla/google.src", "http://www.google.com/favicon.ico", "Google Search", "Web");

works, while

javascript:window.sidebar.addSearchEngine("http://www.google.com/mozilla/google.src", "data:image/x-icon,%00%00%01%00%01%00%10%10%00%00%00%00%00%00h%05%00%00%16%00%00%00(%00%00%00%10%00%00%00%20%00%00%00%01%00%08%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%80%00%00%80%00%00%00%80%80%00%80%00%00%00%80%00%80%00%80%80%00%00%C0%C0%C0%00%80%80%80%00%00%00%FF%00%00%FF%00%00%00%FF%FF%00%FF%00%00%00%FF%00%FF%00%FF%FF%00%00%FF%FF%FF%00%FF%FD%FF%00%FD%FD%FF%00%FA%FD%FF%00%F8%FD%FF%00%FF%FC%FF%00%FD%FC%FF%00%FA%FC%FF%00%FF%FB%FF%00%FF%FA%FF%00%FE%FA%FF%00%FC%FA%FF%00%F8%FA%FF%00%FB%F9%FF%00%F3%F9%FF%00%FF%F8%FF%00%FA%F8%FF%00%EF%F8%FF%00%E6%F8%FF%00%D9%F8%FF%00%FF%F7%FF%00%FF%F6%FF%00%F6%F6%FF%00%FF%F5%FF%00%FA%F5%FF%00%F4%F4%FF%00%ED%F4%FF%00%FF%F3%FF%00%FF%F2%FF%00%F9%F1%FF%00%F6%F0%FF%00%FF%FF%FE%00%F8%FF%FE%00%F6%FF%FE%00%F4%FF%FE%00%E3%FF%FE%00%FF%FD%FE%00%E9%FF%FD%00%FF%FF%FC%00%F6%FF%FC%00%F3%FF%FC%00%F7%FD%FC%00%FF%FF%FB%00%FE%FF%FB%00%E0%FF%FB%00%FF%FA%FB%00%F7%F5%FB%00%FA%FF%FA%00%EF%FE%FA%00%FF%FF%F9%00%FF%FD%F9%00%FF%FB%F9%00%F9%ED%F9%00%FF%FF%F8%00%E6%FF%F8%00%E1%FF%F8%00%FF%FD%F8%00%F4%FB%F8%00%FF%FF%F7%00%FB%FF%F7%00%F3%FF%F7%00%F1%FF%F7%00%ED%FF%F7%00%FF%F1%F7%00%FF%FD%F6%00%FD%FA%F6%00%EB%FA%F6%00%F1%FF%F5%00%EB%FF%F5%00%FF%FB%F5%00%FF%FF%F4%00%F3%FF%F4%00%EA%FF%F4%00%FF%FF%F3%00%FF%F5%F3%00%FF%FF%F2%00%FD%FC%F2%00%FF%FF%F1%00%FF%FF%F0%00%F7%FF%F0%00%F8%F0%F0%00%FF%FF%EF%00%F3%FF%EF%00%FF%FF%EE%00%FD%FF%EE%00%F6%FF%EE%00%FF%EE%EE%00%FF%FF%ED%00%F6%FF%ED%00%FE%FF%EB%00%FF%F9%EA%00%FF%FF%E9%00%FF%FF%E8%00%F6%FF%E8%00%FF%F9%E7%00%FF%F8%E7%00%F7%F1%E6%00%FD%F6%E5%00%FF%F6%E4%00%F6%F6%E4%00%EC%DF%E1%00%FC%E6%E0%00%FF%EB%DD%00%12%18%DD%00%00%1A%DC%00%1A%25%DB%00%FF%F2%D7%00%2F%20%D6%00%0D%1F%D6%00%F9%D9%D3%00%FF%E7%D2%00%E1%E5%D2%00%0F(%D2%00%19%24%D2%00%1D%1F%D1%00%07%10%D1%00%FF%E5%D0%00%00%26%CE%00%19%14%CE%00%F3%DC%CD%00%00*%CD%00%22.%CC%00%0E%14%CB%00%F9%EA%CA%00%F2%D3%CA%00%D4%D2%CA%00%FF%D7%C9%00%E8%D2%C7%00%00%23%C7%00%E3%DB%C4%00%FE%CE%C2%00%FF%F5%C1%00%F0%DE%BF%00%FF%D7%BC%00%FA%D2%AF%00%C2%B6%AA%00%CD%A9%A3%00%D9%8F%89%00%D0%8F%86%00%DF%99%81%00%E9%9E~%00%C7%8F%7C%00%D6%A4z%00%EF%ACo%00%E9%9Ao%00%D8%85e%00%A9%84b%00%AFhZ%00%BCsW%00J%B6V%009%B3U%00%3D%B8P%00U%ADO%00R%B5M%00E%B3M%00A%B1M%00%3B%B4L%009%B6H%00J%B9G%00%CAtF%00P%B8C%00%DBnB%00D%B5%3C%00%D6%5B7%00%B8%601%00%B171%00%D8%5B%2F%00%40%B7-%00t0)%00%8B%26(%00%D6S'%00%CB%5B%26%00%B63%25%00%B1%3A%24%00%995%23%00%B9n%22%00%D9%60%22%00%E8X!%00%CA%5C%20%00%C5.%20%00%F7V%1F%00%E7h%1D%00%B4B%1D%00%B1Z%1C%00%B0I%1C%00%B58%1C%00%8C8%1C%00%D1%5E%1B%00%C62%1A%00%8F%25%1A%00%DB_%19%00%93%3B%17%00%BF%3F%16%00%D2k%15%00%CFc%15%00%F6%5C%15%00%AA*%15%00%80%1F%15%00%E1a%14%00%BA3%13%00%C51%13%00%A0%2C%13%00%9F%12%0F%00%CB*%0E%00%A4%16%0B%00%E8c%07%00%B16%04%00%BD%25%00%00%96%22%00%00V%13%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%FF%FF%FF%00%B1%B1%B1%B1%B1%B1%B1%B1%B1%B1%B1%B1%B1%B1%B1w%B2%2B2%0F%0F%0F%0F%0F%0F%0F%0FP%14%1E%25x%D0%60OOp%A3%CC%D8%D7%CF%DA%C5%A1r%0F%81%CD1%3Bt%B8%DB%98m7af%95%E0%962%7B%C3%0Fn%C2%D9%94J.)%14B%83%D4%972%85%BFS%9D%DE%9Cd%40%170%91%B4%D3%BB%998%80%CAX%B0%DFH%11N%0FUl%90%8A%7D%8B4%8F%D5f%BA%C7%1F-1%5B%23%2F%12%3A%104%22z%B9c%BE%C64%13%18%23%14%14'36W%1Cv%C0I%9F%C8%26%161%19%5D%5C(91M%1A%89%C4T%9A%CE%7CIE%5EFL%23%3C%14R4%87%C12D%A0%BDi2%3F%15G%14%86%8CK%1D%7F%D1%2Fg%92%AE%D6uj5k%8D%C9%B7e*%82%D2DDby%9B%A2%BC%CB%DD%B3%9E%93V!%84%B5Q%0F%3D2h9qsZ_A%24%1B%2C%88%DC%A4%AC%A7%A9%AF%A5%AA%A8%B1%A6%AD%AB%B6%B1%B1%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00", "Google Search", "Web");

give the error message "This search engine isn't supported by Firefox and can't be installed".

The vague error message (which seems to be generically used for most error adding search engines) also leaf something to be desired.
