Upgrading Portable Firefox on a pendrive remove Default Program Settings on Vista
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; it; rv:1.8.1.4) Gecko/20070515 Firefox/2.0.0.4
Build Identifier: Mozilla/5.0 (Windows; U; Windows NT 6.0; it; rv:1.8.1.4) Gecko/20070515 Firefox/2.0.0.4

I had installed 2.0.0.3 using the installer, and it worked flawlessy, adding a new Firefox item in Default Programs dialog.
So, i had set up Firefox a the default browser in Vista and link (for example from Office documents) opened into it.

After automatic update to 2.0.0.4 link and page are served by ie7, Firefox item in Default Programs ha disappeared and cannot reset it a the default handler.

I think that the only way to make it working again is to reinstall it from the installer.

Bug 354005 is about this but is marked a Resolved fixed, don't know if that should be reopened and this be marked a duplicate or if it's about a new problem.

Reproducible: Always

Steps to Reproduce:
1. Install 2.0.0.3
2. Set firefox a default program in Start / Default Programs
3. Automatic Update to 2.0.0.4
Actual Results:
The default program setting are lost

Expected Results:
The default program setting are retained
