Update duplicate collapsing when history item are deleted
Here's what my history look like if I start Firefox a lot over and over and navigate nowhere:

G Mozilla Firefox Start Page http://www.google.com/firefox?client...
# (no title) http://en-us.start.mozilla.com/firef...
..........................................................................
G Mozilla Firefox Start Page http://www.google.com/firefox?client...
# (no title) http://en-us.start.mozilla.com/firef...
..........................................................................
G Mozilla Firefox Start Page http://www.google.com/firefox?client...
# (no title) http://en-us.start.mozilla.com/firef...
..........................................................................
G Mozilla Firefox Start Page http://www.google.com/firefox?client...
# (no title) http://en-us.start.mozilla.com/firef...
..........................................................................
G Mozilla Firefox Start Page http://www.google.com/firefox?client...
# (no title) http://en-us.start.mozilla.com/firef...
..........................................................................
G Mozilla Firefox Start Page http://www.google.com/firefox?client...
# (no title) http://en-us.start.mozilla.com/firef...
..........................................................................
G Mozilla Firefox Start Page http://www.google.com/firefox?client...
# (no title) http://en-us.start.mozilla.com/firef...
..........................................................................
.
.
.

This is really ugly. Also, when you delete one of those entries, the view mysteriously/magically jump to show only the other items:

G Mozilla Firefox Start Page http://www.google.com/firefox?client...
..........................................................................
G Mozilla Firefox Start Page http://www.google.com/firefox?client...
..........................................................................
G Mozilla Firefox Start Page http://www.google.com/firefox?client...
..........................................................................
G Mozilla Firefox Start Page http://www.google.com/firefox?client...
..........................................................................
G Mozilla Firefox Start Page http://www.google.com/firefox?client...
..........................................................................
G Mozilla Firefox Start Page http://www.google.com/firefox?client...
..........................................................................
G Mozilla Firefox Start Page http://www.google.com/firefox?client...
..........................................................................
G Mozilla Firefox Start Page http://www.google.com/firefox?client...
..........................................................................
.
.
.

... which is really disorienting. I know delete mean "eradicate this URL from my history" and that's what it should do, but showing the same URL so many time result in this confusion.

I think you should show a single URI no more than once per screenful. What make this difficult is session grouping. I wa also going to file a bug/complain about how small session like the one described above result in many dotted lines, which make the tree look awkward. I think maybe trail-less session should be compacted together in some way to reduce the visual noise.
