doc type tail appears on rendered page
User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.0; en-GB; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8 ( .NET CLR 3.5.30729; .NET4.0E)
Build Identifier: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-GB; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8 ( .NET CLR 3.5.30729; .NET4.0E)

]> appears at top of page.

Reproducible: Always

Steps to Reproduce:
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"
[
  <!ATTLIST choose editable  CDATA #IMPLIED>
  <!ATTLIST div buttons  CDATA #IMPLIED>
  <!ATTLIST div checked  CDATA #IMPLIED>
  <!ATTLIST div help  CDATA #IMPLIED>
  <!ATTLIST div onok  CDATA #IMPLIED>
  <!ATTLIST div onopen  CDATA #IMPLIED>
  <!ATTLIST div onno  CDATA #IMPLIED>
  <!ATTLIST div onyes  CDATA #IMPLIED>
  <!ATTLIST div glyphaxis CDATA #IMPLIED>

  <!ATTLIST div icon  CDATA #IMPLIED>
  <!ATTLIST div iconmap  CDATA #IMPLIED>
  <!ATTLIST div iconpath  CDATA #IMPLIED>
  <!ATTLIST div jsbal-template CDATA #IMPLIED>
  <!ATTLIST div jsbal-widget CDATA #IMPLIED>
  <!ATTLIST div nocaption  CDATA #IMPLIED>
  <!ATTLIST div tree-model CDATA #IMPLIED>
  <!ATTLIST div type CDATA #IMPLIED>
  <!ATTLIST div useglyph CDATA #IMPLIED>

  <!ATTLIST div widget-id CDATA #IMPLIED>
  <!ATTLIST div yescaption  CDATA #IMPLIED>
  <!ATTLIST iframe widget-id  CDATA #IMPLIED>
  <!ATTLIST iframe jsbal-template CDATA #IMPLIED>
  <!ATTLIST iframe jsbal-widget CDATA #IMPLIED>
  <!ATTLIST input widget-id CDATA #IMPLIED>
  <!ATTLIST input jsbal-template CDATA #IMPLIED>
  <!ATTLIST input jsbal-widget CDATA #IMPLIED>
  <!ATTLIST input editable CDATA #IMPLIED>

  <!ATTLIST label widget-id CDATA #IMPLIED>
  <!ATTLIST label jsbal-template CDATA #IMPLIED>
  <!ATTLIST label jsbal-widget CDATA #IMPLIED>
  <!ATTLIST choose widget-id CDATA #IMPLIED>
  <!ATTLIST choose jsbal-template CDATA #IMPLIED>
  <!ATTLIST choose jsbal-widget CDATA #IMPLIED>
  <!ATTLIST choose editable CDATA #IMPLIED>
  <!ATTLIST script id  CDATA #IMPLIED>
]>





























<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >

<title>Edit my profile</title>
<link type="text/css" rel="stylesheet"
	href="/iBffsdb/css/style.css" >


<script type="text/javascript" src="../javascript/combo.js"></script>
<script type="text/javascript"
	src="/iBffsdb/javascript/jsbal/jsbal.js"
	id="jsbal-script"></script>
<script type="text/javascript"
	src="/iBffsdb/javascript/jsbal/xhr-form.js"></script>
<script language="javascript" type="text/javascript"  
	src="/iBffsdb/javascript/jsbal/widget/Widget.js">
</script>
<script language="javascript" type="text/javascript"  
	src="/iBffsdb/javascript/jsbal/widget/TabControl.js">
</script>
<script language="javascript" type="text/javascript"  
	src="/iBffsdb/javascript/jsbal/widget/TreeView.js">
</script>

<script language="javascript" type="text/javascript"  
	src="/iBffsdb/javascript/jsbal/widget/OptionPane.js">
</script>
<script language="javascript" type="text/javascript"  
	src="/iBffsdb/javascript/jsbal/widget/CalendarControl.js">
</script>
	
<!-- script type="text/javascript"
	src="../javascript/crm-dao/civicrmEmail.js"></script -->


<script type="text/javascript"
	src="/iBffsdb/javascript/crm-forms/contact/contact.js">
</script>
<script type="text/javascript"
	src="/iBffsdb/javascript/crm-forms/contact/organisation.js">
</script>





<script type="text/javascript">
function EmailForm(property){
	this.property=property;
	
	this.index=1;
};
EmailForm.prototype.removeWidget=function(event){
	var nrow;
	for(nrow=jsbal.eventSource(event).parentNode;nrow.tagName!="TR";nrow=nrow.parentNode);
	var srow=nrow.id.substring(this.property.length+1);
	var row=eval(srow.substring(0, srow.indexOf("]")));
	
	var rid=this.property+"["+row+"]";
	var w=nrow;
	var tbody=w.parentNode;
	var rows=tbody.rows;
	tbody.removeChild(w);
	for(var i=0;i<rows.length;i++){
		var r=rows[i];
		if(r.id.indexOf(this.property+"[")==0){
			var sx=r.id.substring(this.property.length+1);
			sx=sx.substring(0, sx.indexOf("]"));
			var x=parseInt(sx);
			if (x>row){
				var npath=this.property+"["+(x - 1)+"]";
				var opath=this.property+"["+(x)+"]";
				var rebind=function(cnodes, opath, npath){
					for( var icn=0; icn< cnodes.length ; icn++){
					var cn=cnodes[icn];
					var tcn=typeof cn;
					if(1==cn.nodeType){
						if(cn.id.indexOf(opath)==0){
							cn.id=npath+cn.id.substring(opath.length);
						}
						if(cn.name!=undefined){
						if(cn.name.indexOf(opath)==0){
							cn.name=npath+cn.name.substring(opath.length);
						}}
						if(cn.tagName=="LABEL"){
							if(cn.getAttribute("for").indexOf(opath)==0){
								cn.setAttribute("for",npath+cn.getAttribute("for").substring(opath.length));
							}
						}
						rebind(cn.childNodes, opath, npath);
					}
					
					}
				};
				rebind(r.childNodes, opath, npath);
				r.id=npath;
			}
			
		}	
	}
	--this.index;
	
};
EmailForm.prototype.addWidget=function(container){
	var tr=document.createElement("TR");
	var path=this.property+"["+this.index+"]";
	tr.setAttribute("id", path);
	var td=document.createElement("TD");
	var innerHTML="";
	

	innerHTML+="<input type='hidden' name='"+path+".order'"
	+ " id='"+path+".order'/>";

	innerHTML+="<Select name='"+path+".locationTypeId'"
	+" id='"+path+".locationTypeId'>";

	innerHTML+= this.locationType();
	
	innerHTML+="</select>&nbsp;";

	innerHTML+="<input name='"+path+".email.email'"
	+ " id='"+path+".email.email' size='64' maxlength='80'/>&nbsp;";

	innerHTML+="<button type='button' onClick='emailForm.removeWidget(event)\'>Delete this</button><br/>"
	
	innerHTML+="<input name='"+path+".bulkmail'"
	+ " id='"+path+".bulkmail'" 
	+ " type='checkbox'"
	+ " title='Allow announcements'"
	+ "/><label for='"+path+".bulkmail'>I'd like to receive announcements</label>";
	
	innerHTML+="";
	
	tr.appendChild(td);
	var c=container;
	c.appendChild(tr);
	td.innerHTML=innerHTML;
	++this.index;
};

EmailForm.prototype.locationType = function emailLocationType(){

	var options=[
	         	//
	        	{id:"1",label:"Home"
	        	//	
	        	},
	        	//
	        	{id:"2",label:"Work"
	        	//	
	        	},
	        	//
	        	{id:"3",label:"Main"
	        	//	
	        	},
	        	//
	        	{id:"4",label:"Other"
	        	//	
	        	},
	        	//
	        	{id:"5",label:"Billing"
	        	//	
	        	},
	        	//
	        	null   ];
		var innerHTML='';
	    for(var i in options){
	        var o=options[i];
	        if(o){ 
	        	innerHTML+='<option value='+o.id+'>'
	        	+   escape(o.label)
	        	+ (o.checked?"checked='checked'":'')
	        	+ "</option>";
				
	        }
	    }
	    return innerHTML;
	}

var emailForm=new EmailForm("emails"); 

</script>





<script type="text/javascript" language="javascript">

function AddressForm(prop){
	this.property=prop;
	this.index=1;

};

AddressForm.prototype.addText=function(p,n,l,a,s){
	if(a==undefined)var a1="";
	else a1=a;
	if(s==undefined)var s1="</td><td>";
	else s1=s;
	var ih="<label for='"+p+"."+n+"'>"+l+"</label>";
	ih+=s1+"<input type='text'"+a1
		+ " id='"+p+"."+n+"'"
		+ " name='"+p+"."+n+"'>";
	return ih;	
};
AddressForm.prototype.addControl=function(lbl, ctl,attribs,sep){
	if("string"==typeof lbl){
		var lx=lbl;
		var lt="";
	}else{
		 lx=lbl.text;
		lt='title="'+lbl.title+'"';
	}
	if(ctl.path){
		if(ctl.name)var pn=ctl.path+'.'+ctl.name;
		else pn=ctl.path;
	}else pn=name;
	if(pn==undefined)pn='';
	if(attribs==undefined)var a1="";
	else a1=attribs;
	if(sep==undefined)var s1="</td><td>";
	else s1=sep;
	var ih="";
	var closure=ctl.tag=="input"?"":"</"+ctl.tag+">";
	if(lbl!=undefined){
	   ih+="<label for='"+pn+"'"+lt+">"+lx+"</label>";
	}
	ih+=s1+"<"+ctl.tag+ctl.type+" id='"+pn+"'name='"+pn+"'"+ctl.attr+a1+">"+ctl.inner+closure;
	return ih;	
};
AddressForm.prototype.newControl=function(path, name, tagtype,attribs, inner){
	if(attribs==undefined)var a1="";
	else a1=attribs;
	if(inner==undefined)var i1="";
	else i1=inner;
	if(tagtype.toLowerCase()=="select"){
		var t0="select";
		var t1="";
	}else{
		t0="input";
		t1=" type='"+tagtype+"'";
	}
    var c=new function(){
       this.tag=t0;
       this.type=t1;
       this.path=path;
       this.name=name;
       this.attr=a1;
       this.inner=i1;   
    };
	return c;
};
AddressForm.prototype.newOptions=function(o){
   var ih="";
   for (var i in o){
	   ih+="<option value='"+i+"'>"+o[i]+"</option>\n";
   }	 
   return ih;
};
AddressForm.prototype.removeWidget=function(event){
	var nrow;
	for(nrow=jsbal.eventSource(event).parentNode;nrow.tagName!="TR";nrow=nrow.parentNode);
	for(nrow=nrow.parentNode;nrow.tagName!="TR";nrow=nrow.parentNode);
	var srow=nrow.id.substring(this.property.length+1);
	var row=eval(srow.substring(0, srow.indexOf("]")));
	
	var rid=this.property+"["+row+"]";
	var w=nrow;
	var tbody=w.parentNode;
	var rows=tbody.rows;
	tbody.removeChild(w);
	for(var i=0;i<rows.length;i++){
		var r=rows[i];
		if(r.id.indexOf(this.property+"[")==0){
			var sx=r.id.substring(this.property.length+1);
			sx=sx.substring(0, sx.indexOf("]"));
			var x=eval(sx);
			if (x>row){
				var npath=this.property+"["+(x - 1)+"]";
				var opath=this.property+"["+(x)+"]";
				var rebind=function(cnodes, opath, npath){
					for( var icn=0; icn< cnodes.length ; icn++){
					var cn=cnodes[icn];
					var tcn=typeof cn;
					if(1==cn.nodeType){
						if(cn.id.indexOf(opath)==0){
							cn.id=npath+cn.id.substring(opath.length);
						}
						if(cn.name!=undefined){
						if(cn.name.indexOf(opath)==0){
							cn.name=npath+cn.name.substring(opath.length);
						}}
						if(cn.tagName=="LABEL"){
							if(cn.getAttribute("for").indexOf(opath)==0){
								cn.setAttribute("for",npath+cn.getAttribute("for").substring(opath.length));
							}
						}
						rebind(cn.childNodes, opath, npath);
					}
					
					}
				};
				rebind(r.childNodes, opath, npath);
				r.id=npath;
			}
			
		}	
	}
	--this.index;
	
};

AddressForm.prototype.addWidget=function(event){
	var tTable;
	
	for(tTable=jsbal.eventSource(event);tTable.tagName!="TABLE";tTable=tTable.parentNode);
	var tBody=tTable.tBodies.item(0);
	var tRow=document.createElement("TR");
	var tD=document.createElement("TD");
	var path=this.property+"["+this.index+"]";
	tRow.id=path;
	//two cells - 2nd has button
	var innerHTML="<table><tbody><tr>";

	//table of form controls
	innerHTML+="<td><table><tbody><tr>";
	
	innerHTML+="<td>";
	innerHTML+="<label for='"+path+".addresses.locationTypeId'>Usage<em style='color: red;'>*</em></label>";
	innerHTML+="</td>";
	
	innerHTML+="<td>";
	innerHTML+="<select name=\""+path+".locationTypeId\""
	+" id=\""+path+".locationTypeId\">";

	innerHTML+=this.locationType();

	innerHTML+="</select></td></tr>";

	innerHTML+="<tr><td>";
	innerHTML+=this.addText(path,"addresses.name", "Name&nbsp;for&nbsp;address<em style='color: red;'>*</em><span style='font-size:smaller'><br/>(eg&nbsp;\"My&nbsp;House\"</span>", "size='64'maxlength='255'");
	innerHTML+="</td></tr>";

	innerHTML+="<tr><td>";
	innerHTML+=this.addText(path,"addresses.supplementalAddress1", "Addressee&nbsp;(Line&nbsp;1)", "size='64'maxlength='96'");
	innerHTML+="</td></tr>";

	innerHTML+="<tr><td>";
	innerHTML+=this.addText(path,"addresses.supplementalAddress2", "Addressee&nbsp;(Line&nbsp;2)","size='64'maxlength='96'");
	innerHTML+="</td></tr>";

	innerHTML+="<tr><td>";
	innerHTML+=this.addText(path,"addresses.supplementalAddress3", "Addressee&nbsp;(Line&nbsp;3)","size='64'maxlength='96'");
	innerHTML+="</td></tr>";

	innerHTML+="<tr><td>";
	innerHTML+=this.addText(path,"addresses.streetAddress", "Street Address", "maxlength='96'size='64'");
	innerHTML+="</td></tr>";

	innerHTML+="<tr><td>";
	o={"":"","N":"North", "S": "South","E":"East", "W":"West"};

//	innerHTML+=addText(path,"streetNumber", "Street Number");
	innerHTML+=this.addControl("Street Number",
			this.newControl(path, "addresses.streetNumber", "text", "length='64'maxlength='10'size='10'"), 
			undefined,"</td><td><table><tbody><tr><td>" );

    innerHTML+="</td><td>";
	innerHTML+=this.addControl("A-Z", 
			this.newControl(path, "addresses.streetNumberSuffix", "text", "length='2'maxlength='2'size='2'")
			);
     
	//innerHTML+=addText(path,"streetNumberPostDirectional", "Directional Suffix", 
	//		"length='5'maxlength='5'size='5'");
	innerHTML+="</td></tr></tbody></table>";	
	innerHTML+="</td></tr>";

	innerHTML+="<tr><td>";
//	innerHTML+=addControl("Directional Prefix", 
//		newControl(path,"streetNumberPredirectional", "select", undefined, 
//			newOptions(o)),undefined, "</td><td><table border='1'><tbody><tr><td>");

//	innerHTML+=addText(path, "streetName", "Street Name",undefined,"</td><td><table width='100%'border='1'><tbody><tr><td>");

	innerHTML+=this.addControl(
			"Street Name", 
			this.newControl(
					path,
					"addresses.streetName", "text", "maxlength='96'size='48'", 
					undefined),
			undefined, 
			"</td><td><table style='width:100%;'><tbody><tr style='vertical-align:bottom'><td><p style='margin:0px'>"+
				this.addControl(
					{text:"Dir. Prefix",title:"Directional Prefix"}, 
					this.newControl(
							path,
							"streetNumberPredirectional", 
							"select", 
							undefined, 
							this.newOptions(o)),
					undefined,
					"</p>") +"</td><td>");

	innerHTML+="</td><td><p style='margin:0px'>";
	innerHTML+=this.addText(path, 
			"addresses.streetType", 
			"Type", 
			"length='5'maxlength='5'size='5'", 
			"</p>");	
	innerHTML+="</td><td><p style='margin:0px'>";
	innerHTML+=this.addControl({text:"Dir. Suffix", title:"Directional Suffix"}, 
			this.newControl(
					path,
					"addresses.streetNumberPostdirectional", 
					"select", 
					undefined, 
					this.newOptions(o)),
			undefined, 
			"</p>");

	innerHTML+="</td></tr></tbody></table>";	
	innerHTML+="</td></tr>";

	innerHTML+="<tr><td>";
	innerHTML+=this.addText(path, "addresses.suburb", "Surburb","maxlength='64'size='64'");	
	innerHTML+="</td></tr>";

	innerHTML+="<tr><td>";
	innerHTML+=this.addText(path, "addresses.city", "City<em style='color: red;'>*</em>", "maxlength='64'size='64'",
			"</td><td><table><tbody><tr><td>");	
	innerHTML+="<em class='fieldError'/></td><td>";
	innerHTML+=this.addText(path, "postalCode", "Post code<em style='color: red;'>*</em>", "length='4'maxlength='4'size='4'");
	innerHTML+="</td></tr></tbody></table>";	
	innerHTML+="</td></tr>";

	//table of controls
	innerHTML+="<tbody></table></td>";

	// second cell in sub-form.
	innerHTML+="<td style='vertical-align:top;'>";
	innerHTML+="<button type='button' onclick='addressForm.removeWidget(event)'>Delete&nbsp;this</button>";
	
	innerHTML+="</td></tr><tbody></table>";

	tD.innerHTML=innerHTML;
	tRow.appendChild(tD);
	tBody.appendChild(tRow);
	
	++this.index;
};

var addressForm=new AddressForm("addresses");

</script>

<script type='text/javascript'>
AddressForm.prototype.locationType=function (){

var options=[
         	//
        	{id:"1",label:"Home"
        	//	
        	},
        	//
        	{id:"2",label:"Work"
        	//	
        	},
        	//
        	{id:"3",label:"Main"
        	//	
        	},
        	//
        	{id:"4",label:"Other"
        	//	
        	},
        	//
        	{id:"5",label:"Billing"
        	//	
        	},
        	//
        	null   ];
	var innerHTML='';
    for(var i in options){
        var o=options[i];
        if(o){ 
        	innerHTML+='<option value='+o.id+'>'
        	+   escape(o.label)
        	+ (o.checked?"checked='checked'":'')
        	+ "</option>";
			
        }
    }
    return innerHTML;
}
</script>





<script type="text/javascript">
function PhoneForm(property){
	this.property=property;
	
	this.index=0;
};
PhoneForm.prototype.removeWidget=function(event){
	var nrow;
	for(nrow=jsbal.eventSource(event).parentNode;nrow.tagName!="TR";nrow=nrow.parentNode);
	for(nrow=nrow.parentNode;nrow.tagName!="TR";nrow=nrow.parentNode);
	var srow=nrow.id.substring(this.property.length+1);
	var row=eval(srow.substring(0, srow.indexOf("]"))); 
	
	var rid=this.property+"["+row+"]";
	var w=nrow;
	var tbody=w.parentNode;
	var rows=tbody.rows;
	tbody.removeChild(w);
	for(var i=0;i<rows.length;i++){
		var r=rows[i];
		if(r.id.indexOf(this.property+"[")==0){
			var sx=r.id.substring(this.property.length+1);
			sx=sx.substring(0, sx.indexOf("]"));
			var /*Number*/ x=parseInt(sx);
			if(x==NaN)throw new TypeError("Bad index: "+sx);
			if (x>row){
				var npath=this.property+"["+(x - 1)+"]";
				var opath=this.property+"["+(x)+"]";
				var rebind=function(cnodes, opath, npath){
					for( var icn=0; icn< cnodes.length ; icn++){
					var cn=cnodes[icn];
					var tcn=typeof cn;
					if(1==cn.nodeType){
						if(cn.id.indexOf(opath)==0){
							cn.id=npath+cn.id.substring(opath.length);
						}
						if(cn.name!=undefined){
						if(cn.name.indexOf(opath)==0){
							cn.name=npath+cn.name.substring(opath.length);
						}}
						if(cn.tagName=="LABEL"){
							if(cn.getAttribute("for").indexOf(opath)==0){
								cn.setAttribute("for",npath+cn.getAttribute("for").substring(opath.length));
							}
						}
						rebind(cn.childNodes, opath, npath);
					}
					
					}
				};
				rebind(r.childNodes, opath, npath);
				r.id=npath;
			}
			
		}	
	}
	--this.index;
	
};
PhoneForm.prototype.addWidget=function(container){
	var tr=document.createElement("TR");
	var path=this.property+"["+this.index+"]";
	tr.setAttribute("id", path);
	
	var innerHTML="<td>";
	innerHTML+="<table><tbody><tr><td>";
	innerHTML+="<table><tbody>";

	innerHTML+="<tr><td><label for='"+path+".phone.locationTypeId'>Usage<em style=\"color: red;\">*</em></label></td>";
	innerHTML+="<td>";
	innerHTML+="<select name='"+path+".phone.locationTypeId'"
	+" id='"+path+".phone.locationTypeId'>";

	

	innerHTML+=this.locationType();

	innerHTML+="</select></td></tr>";

	innerHTML+="<tr><td><label for='"+path+".phone.phoneType'>Type<em style=\"color: red;\">*</em></label></td>";
	innerHTML+="<td>";
	innerHTML+="<select name='"+path+".phone.phoneType'"
	+" id='"+path+".phone.phoneType'>";

	
//		
				innerHTML+="<option value='Phone'>"
				+   "Phone"
				+ "</option>";
//		
				innerHTML+="<option value='Mobile'>"
				+   "Mobile"
				+ "</option>";
//		
				innerHTML+="<option value='Fax'>"
				+   "Fax"
				+ "</option>";
//		
				innerHTML+="<option value='Pager'>"
				+   "Pager"
				+ "</option>";
//		


	innerHTML+="</select></td></tr>";

	innerHTML+="<tr><td><label for='"+path+".phone.mobileProviderId'>Provider/Toll Zone<em style=\"color: red;\">*</em></label></td>";
	innerHTML+="<td>";
	innerHTML+="<select name='"+path+".phone.mobileProviderId'"
	+" id='"+path+".phone.mobileProviderId'>";

	
//		
				innerHTML+="<option value='206'>"
				+   "Black and White(058)"
				+ "</option>";
//		
				innerHTML+="<option value='27'>"
				+   "Telecom Lower NI(04)"
				+ "</option>";
//		
				innerHTML+="<option value='203'>"
				+   "Telecom Cellular (021)"
				+ "</option>";
//		
				innerHTML+="<option value='202'>"
				+   "Telecom SI(03)"
				+ "</option>";
//		
				innerHTML+="<option value='205'>"
				+   "Vodafone(029)"
				+ "</option>";
//		
				innerHTML+="<option value='26'>"
				+   "Telecom Mobile (027)"
				+ "</option>";
//		
				innerHTML+="<option value='28'>"
				+   "Telecom Wairapapa(06)"
				+ "</option>";
//		
				innerHTML+="<option value='200'>"
				+   "Telecom Central(07)"
				+ "</option>";
//		
				innerHTML+="<option value='194'>"
				+   "Telecom TollFree(0800)"
				+ "</option>";
//		
				innerHTML+="<option value='199'>"
				+   "Telecom Upper NI(09)"
				+ "</option>";
//		
				innerHTML+="<option value='195'>"
				+   "Telstraclear TollFree(0508)"
				+ "</option>";
//		
				innerHTML+="<option value='196'>"
				+   "2 Degrees Mobile"
				+ "</option>";
//		


	innerHTML+="</select></td></tr>";
	
	innerHTML+="<tr><td><label for='"+path+".phone.phone'>Number<em style=\"color: red;\">*</em></label></td>";
	innerHTML+="<td>";
	innerHTML+="<input name='"+path+".phone.phone'"
	+ " id='"+path+".phone.phone'type='text'maxlength='16'/>";
	innerHTML+="</td></tr>";

	innerHTML+="</tbody></table></td>";

	innerHTML+="<td style='vertical-align:top;'>";
	innerHTML+="<button type='button' onClick='phoneForm.removeWidget(event)\'>Delete this</button><br/>"

	innerHTML+="<td></tr></tbody></table>";
	
	innerHTML+="</td>";
	
	
	
	var c=container;
	tbody=container.tBodies.item(0);
	tbody.appendChild(tr);
	tr.innerHTML=innerHTML;
	++this.index;
};

PhoneForm.prototype.locationType=function (){

	var options=[
	//
	{id:"1",label:"Home"
	//	
	},
	//
	{id:"2",label:"Work"
	//	
	},
	//
	{id:"3",label:"Main"
	//	
	},
	//
	{id:"4",label:"Other"
	//	
	},
	//
	{id:"5",label:"Billing"
	//	
	},
	//
	null   ];
		var innerHTML='';
	    for(var i in options){
	        var o=options[i];
	        if(o){ 
	        	innerHTML+='<option value='+o.id+'>'
	        	+   escape(o.label)
	        	+ (o.checked?"checked='checked'":'')
	        	+ "</option>";
				
	        }
	    }
	    return innerHTML;
	}

var phoneForm=new PhoneForm("phones"); 

</script>


</head>
<body >
<script type="text/javascript"> 
	jsbal.require("widget/TabControl");
	jsbal.require("widget/CalendarControl");
//	jsbal.require("widget/OptionPane");
</script>




<table class="pagelayout" style="text-align: left;">
	<tbody>
		<tr class="wpcpagetitle">

			<td style="height: 100px; min-width: 100px; border-right-width: 0px;"
				valign="middle" align="center"><img align="top"
				src="/iBffsdb/images/logo.gif" height="100" hspace="0" border="0" /></td>
			<td class="pagetitle">
			<p class="pagetitle">WPC Online Service Desk</p>
			<p class="pageSubTitle">Edit my profile</p>
			</td>
		</tr>
		<tr valign="top">
			<!-- link title="style" rel=stylesheet href="/iBffsdb/css/style.css" /-->











<td class="wpcsidenavbar" style="padding-bottom: 50px;overflow: scroll;" >
	<div class="wpcLink0">
	<a href="/iBffsdb/wpcclient/welcome.jsp">Home</a><br/>

	</div>	
		
		
	     	<div class="wpcLink0"><a href='/iBffsdb/wpcclient/my-wpc/welcome.jsp'  >My WPC-Online</a></div>
	    
	<ul class="nav">
	
	
		<li><div class='wpcLink1'>
		
		<a href='/iBffsdb/wpcosd/editProfile.action?contactId=1'  >My Profile</a></div></li>
		
		<li><div class='wpcLink1'>Administer CRM</div>
		<ul class="nav">
			<li>

			   <div class="wpcLink2">
			     <a href="/iBffsdb/wpcclient/admin/options2.jsp">Options admin</a>
			    </div>
			</li>
			<li>
			   <div class="wpcLink2">
			     <a href="/iBffsdb/wpcclient/admin/membershipType.jsp">Memberships</a>
			   </div>

			</li>
			<li>
			   <div class="wpcLink2">
			     <a href="/iBffsdb/wpcclient/admin/PledgeType.jsp">Pledges</a>
			   </div>
			</li>
			<li>
			   <div class="wpcLink2">

			     <a href="/iBffsdb/wpcclient/admin/Group.jsp">Groups</a>
			   </div>
			</li>
			<li>
			   <div class="wpcLink2">
			     <a href="/iBffsdb/wpcclient/admin/ContributionType.jsp">Contributions</a>
			   </div>
			</li>

			<li>
			   <div class="wpcLink2">
			     <a href="/iBffsdb/wpcclient/admin/mail.jsp">Mail</a>
			   </div>
			</li>
		</ul></li>
		
	<li><div class='wpcLink1'><a href="/iBffsdb/logout"  >Log out</a></div></li>
	
	
     	<li><div class="wpcLink1">Edit Contacts</div></li>

    
	</ul>
	<div class='wpcLink0'><a href="/iBffsdb/wpcclient/services.jsp" >Services</a></div>
	<ul class="nav">
	<li><div class="wpcLink1"><a class="wpcLink" href="/iBffsdb/wpcclient/medical.jsp" >Medical</a></div></li>
	<li><div class="wpcLink1"><a class="wpcLink" href="/iBffsdb/wpcclient/dental.jsp">Dental</a></div></li>
	<li><div class="wpcLink1"><a class="wpcLink" href="/iBffsdb/wpcclient/massage.jsp">Massage</a></div></li>
	<li><div class="wpcLink1"><a class="wpcLink" href="/iBffsdb/wpcclient/nermine.jsp">Foot Care</a></div></li>

	<li><div class="wpcLink1"><a class="wpcLink" href="/iBffsdb/wpcclient/reflexology.jsp">Reflexology</a>
	<img src="/iBffsdb/images/new-ani.gif" style="overflow: hidden;margin-left:20px; position: absolute;" align="abstop"/></div></li>
	<li><div class="wpcLink1"><a class="wpcLink" href="/iBffsdb/wpcclient/couns.jsp">Counselling</a></div></li>
	<!-- <li><div class="wpcLink1"><a class="wpcLink" href="/iBffsdb/wpcclient/shiatsu.jsp">Shiatsu</a></div></li> -->
	</ul>
		<div class='wpcLink0'><a href="/iBffsdb/wpcclient/membershipinfo.jsp">Membership</a></div>
	<div class='wpcLink0'>Advocacy</div>

	<ul class="nav">
	<li><div class='wpcLink1'><a href="/iBffsdb/wpcclient/brights.jsp" >Benefit Rights</a></div></li>
	<li><div class='wpcLink1'><a href="/iBffsdb/wpcosd/brtraining.action">Advocate&nbsp;Training</a></div></li>
	<li><div class='wpcLink1'><a href="/iBffsdb/wpcclient/wrights.jsp">Workers rights</a></div></li>
	</ul>
	<div class='wpcLink0'><a href="/iBffsdb/bffclient/welcome.jsp">Benefit fact file</a></div>

	<div class="wpcLink0">Links</div>
	<ul class="nav">
	<li><div class="wpcLink1"><a class="wpcLink" href="/iBffsdb/wpcclient/news.jsp"><img style='vertical-align:middle;border-collapse:collapse;border:0;width:20px;height:20px;'src="/iBffsdb/images/wpc-news.gif"></img>News</a></div></li>
	<li><div class="wpcLink1"><a class="wpcLink" href="http://www.facebook.com/pages/Wellington-Peoples-Centre/91881474385" style=""><img style='vertical-align:middle;border-collapse:collapse;border:0;width:20px;height:20px;'src="/iBffsdb/images/facebookf.gif">Facebook</a></div></li>
	<li><div class="wpcLink1"><a class="wpcLink" href="http://www.bloglines.com/blog/Wellington-Peoples-Centre" style=""><img style='vertical-align:middle;border-collapse:collapse;border:0;width:20px;height:20px;'src="/iBffsdb/images/bloglines-22.gif">Bloglines</a></div></li>
	</ul>
	<div class="wpcLink0"><a class="wpcLink" href="/iBffsdb/wpcosd/contact.action" >Contact&nbsp;us</a></div>

	<div class="wpcLink0"><a class="wpcLink" href="/iBffsdb/wpcclient/donate/support_money.jsp" >How 2 support WPC</a>
	<img src="/iBffsdb/images/new-ani3.gif" style="overflow: hidden;margin-left:5px; position: absolute;" align="abstop"/></div>
	
    <table style="height:100%;margin-top:25px;text-align:center;margin-right: auto;margin-left:auto;" >
	<tfoot><tr>
	<th valign="bottom"><a href="http://www.givealittle.co.nz/org/WellingtonPeoplesCentre"><img style="height:50px;width:90px;border:none" alt="Give a Little" src="https://www.givealittle.co.nz/images/chrome/logo.gif"/></a></th>
	</tr><tr>
	<th valign="bottom"><img style="height:50px;width:90px;border:none" alt="Secured by RapidSSL" src="/iBffsdb/images/rapidssl_ssl_certificate.gif" /></th>
	</tr><tr>

	<td><div style="font-size:x-small;">Java &amp; Linux hosting by</div><a href='http://rimuhosting.com/vps-servers?r=77df797077e8f01c76fc52e014e6cbaa'><img align="middle" style="border:none"src="https://rimuhosting.com/images/promo/rimuhostingaffiliate_110_white3d.png" alt="RimuHosting.com"></a></td>
	</tr><tr>
	<td><div style="font-size:x-small;">Recommended browsers</div>
	<a href='http://www.mozilla.com'><img align="middle" style="border:none"src="/iBffsdb/images/firefox.gif" alt="mozilla.com"></a>
	<a href='http://www.microsoft.com/windows/Internet-explorer/default.aspx'><img align="middle" style="border:none"src="/iBffsdb/images/iexplorer.gif" alt="microsoft.com/ie"></a>
	<a href='http://www.apple.com/safari/'><img align="middle" style="border:none"src="/iBffsdb/images/safari.gif" alt="apple.com/safari"></a></td>
	</tr></tfoot>

	</table>
	
</td>
			<td class='content'
				style="font-family: sans-serif">
			<form method="post" action="editProfile.action">
				<input type="hidden" id="contact.id"
					name="contact.id" id="hidContactId"
					value="1"></input>
			
			<div jsbal-widget="jsbal.widget.TabControl">
			<div title="Details">
			<table style='width: 100%; background-color: #d0d0d0'>
				<tbody>

					<tr>
						<td>For<em style="color: red;">*</em></td>
						<td>
							<input type="hidden" id="contact.contactType"
								name="contact.contactType" id="selContactType"
								value="Individual"  />
							<input type="text" disabled="disabled"
								
								  
							    	value="Me"
								  
								  
								  
								  
								  
								 editable="false"/
							><div style="right:200px;position:absolute;display:inline;float: right;"><label for="txtProfileId">Profile ID</label><input type="text" disabled="disabled" editable="false" value="1"/></div>
							
							  <em class="fieldError"></em>
							
						</td>

					</tr>

					<tr>
						<td>Display name<em style="color: red;">*</em></td>
						<td>
							<input type="text" maxlength="128" name="contact.displayName"
								value="Administrator" />
							<em class="fieldError"></em>
						</td>

					</tr>

					<tr>
						<td>Nick name<em style="color: red;">*</em></td>
						<td>
							<input type="text" maxlength="128" name="contact.nickName"
								value="Admin" />
							<em class="fieldError"></em>
						</td>

					</tr>

					<tr id='orgNameRow' style='display: none'>
						<td>Organisation&nbsp;name<em style="color: red;">*</em></td>
						<td>
							<input type="text" maxlength="128" name="contact.organizationName"
								value="" />
							<em class="fieldError"></em>
						</td>

					</tr>

					<tr id='hhNameRow' style="display: none">
						<td>Household&nbsp;name<em style="color: red;">*</em></td>
						<td>
							<input type="text" maxlength="128" name="contact.householdName"
								value="" />
							<em class="fieldError"></em>
						</td>

					</tr>

					<tr>
						<td>Contact</td>
						<td>
						<table>
							<tbody>
								<tr>
									<td>Title<em style="color: red;">*</em></td>

									<td>First name<em style="color: red;">*</em></td>
									<td>Middle name(s)</td>
									<td>Last name<em style="color: red;">*</em></td>
									<td>Suffix</td>
								</tr>
								<tr>

									<td>
									<div>

										<select style="width: 75px" id="contact.prefixId"
											name="contact.prefixId">
											
												<option value="1">Mrs</option>
											
												<option value="2">Ms</option>
											
												<option value="3">Mr</option>
											
												<option value="4">Dr</option>

											
												<option value="5">Sir</option>
											
												<option value="6">Rt Hon</option>
											
												<option value="7">Sr</option>
											
												<option value="8">Fr</option>
											
												<option value="9">Rev</option>
											
												<option value="10">Mayor</option>

											
										</select>
										<em class="fieldError"> </em>
									</div>
									</td>
									<td>
										<input type="text" maxlength="64" name="contact.firstName"
											value="" />
										<em class="fieldError"></em>
									</td>

									<td>
										<input type="text" maxlength="64" name="contact.middleName"
											value="" />
										<em class="fieldError"></em>
									</td>

									<td>
										<input type="text" maxlength="64" name="contact.lastName"
											value="" />
										<em class="fieldError"></em>
									</td>

									<td>
									<div>

										<select style="width: 50px;" 
											id="contact.suffixId"
											name="contact.suffixId">
											<option value="0"></option>
											
												
													
													
														<option value="1">Jr</option>
													
												
											
												
													
													
														<option value="2">Sr</option>
													
												
											
												
													
													
														<option value="3">II</option>

													
												
											
												
													
													
														<option value="4">III</option>
													
												
											
												
													
													
														<option value="5">IV</option>
													
												
											
												
													
													
														<option value="6">V</option>
													
												
											
												
													
													
														<option value="7">VI</option>
													
												
											
												
													
													
														<option value="8">VII</option>
													
												
											
										</select>

									 <em class="fieldError"></em></div>
									</td>

								</tr>
							</tbody>
						</table>
						</td>
					</tr>
					
					<tr>

						<td>Date&nbsp;Of&nbsp;Birth</td>
						<td>
						<div>

							<input jsbal-widget="jsbal.widget.CalendarControl" name="contact.birthDate"
								id="contact.birthDate" value="" />
							<em class="fieldError">
							</em>
						</div>

						</td>
					</tr>
					
					<tr>
						<td>Gender<em style="color: red;">*</em></td>
						<td>
						  <div>
						    
							  <select id="contact.genderId" name="contact.genderId">
								<option value="0">(Please select)</option>

								
									
										
										
											<option value="1">Female</option>
										
									
								
									
										
										
											<option value="2">Male</option>
										
									
								
									
										
										
											<option value="3">Transgender</option>
										
									
								

							  </select>
							  <em class="fieldError">
							    
							  </em>
						    
						  </div>

						</td>
					</tr>
					
					<tr>
						<td>Legal&nbsp;name<em style="color: red;">*</em></td>
						<td>
						  
							<input type="text" maxlength="128" name="contact.legalName"
								value="John Hutcheson" />
							<em class="fieldError"></em>

						  
						</td>
					</tr>
					
					<tr>
						<td>Web&nbsp;Site</td>
						<td>
							<input type="text" maxlength="128" name="contact.homeUrl"
								value="" />
							<em class="fieldError"></em>
						</td>

					</tr>
					
					<tr>
						<td>Image&nbsp;url</td>
						<td>
							<input type="text" maxlength="128" name="contact.imageUrl"
								value="" />
							<em class="fieldError"></em>
						</td>
					</tr>

					
					<tr>
						<td>Greeting<em style="color: red;">*</em></td>
						<td>
						<div>
							<select 
								id="contact.greetingType" name="contact.greetingType"
								onchange="onChangeGreeting">
								
									<option value="Formal">Formal</option>
								
									<option value="Informal">Informal</option>

								
									<option value="Honorific">Honorific</option>
								
									<option value="Custom">Custom</option>
								
									<option value="Other">Other</option>
								
							</select>
							<em class="fieldError">
							</em>
						</div>

						</td>
					</tr>
					
					<tr id="trOtherGreeting" style="display: none;">
						<td>Other&nbsp;Greeting<em style="color: red;">*</em></td>
						<td>
							<input type="text" maxlength="25" name="contact.customGreeting"
								value="" />
							<em class="fieldError"></em>

						</td>
					</tr>
					
					<tr>
						
							<td><label for='contact.preferredCommunicationMethod'>Preferred&nbsp;contact<em
								style="color: red;">*</em></label></td>
							<td>
							<div><select name="contact.preferredCommunicationMethod"
								id="contact.preferredCommunicationMethod">
								
									<option value="1">Phone</option>

								
									<option value="2">Email</option>
								
									<option value="3">Postal Mail</option>
								
									<option value="4">SMS</option>
								
									<option value="5">Fax</option>
								
							</select><em class="fieldError">
							</em></div>
							</td>

						
					</tr>
					
					<tr id='mail2hhRow'>
						
							<td><label for='contact.civicrmContactByMailToHouseholdId'>Mail&nbsp;to&nbsp;Household</label></td>
							<td>
							<div><select name="contact.civicrmContactByMailToHouseholdId"
								id="contact.civicrmContactByMailToHouseholdId">
								
							</select><em class="fieldError">
							</em></div>

							</td>
						
					</tr>
					
					<tr>
						<td>Email&nbsp;Format<em style="color: red;">*</em></td>
						<td>
							<select id="contact.preferredMailFormat" name="contact.preferredMailFormat"
								id="contact.selEmailFormat" name="contact.selEmailFormat">
								
									
										
										
											<option value="Please select...">Please select...</option>

										
									
								
									
										
											<option selected="selected" value="Both">Both</option>
										
										
									
								
									
										
										
											<option value="HTML">HTML</option>
										
									
								
									
										
										
											<option value="Text">Text</option>
										
									
								
							</select>
							<em class="fieldError">
							</em>
						</td>

					</tr>
					
					<tr>
						<td>Announcements</td>
						<td>
							
							
							
							
							<input id="optOutYes" name="optOut" value="true"
								type="radio" ''/>
							<label for="optOutYes">Not for me thanks</label>
							<input id="optOutNo" name="optOut" name="optOut"
								value="false" type="radio" 'checked="checked"'/>
							<label for="optOutNo">Please keep me informed</label>

							<em class="fieldError"></em>
						</td>
					</tr>
				</tbody>
			</table>
			</div>
			<!-- email -->
			<div title="Email Accounts">
			<table style="width: 100%; background-color: #d0d0d0">

				<tbody>
					<tr>
						<td valign="top">Email&nbsp;addresses<em style="color: red;">*</em></td>
						<td>
						<table border="1" style="margin-bottom: 25px">
							<tbody id="tbodyEmails">
								
									<tr>

										<td>
											<input type="hidden" maxlength="10"
												name="emails[0].order"
												id="emails[0].order"
												value="32"
												style="width: 350px;" />
											<em class="fieldError"></em>
										 
											<select name="emails[0].email.locationTypeId" id="emails[0].email.locationTypeId">
												
													
														
														
															<option value="1">Home</option>
														
													
												
													
														
														
															<option value="2">Work</option>
														
													
												
													
														
														
															<option value="3">Main</option>

														
													
												
													
														
														
															<option value="4">Other</option>
														
													
												
													
														
														
															<option value="5">Billing</option>
														
													
												
											</select>
											<em class="fieldError"></em>
										
											<input maxlength="80" size="64"
												name="emails[0].email.email"
												id="emails[0].email.email"
												value="geek@gmail.com" />
											<em class="fieldError"></em>
										
										<button type="button" value="Delete this"
											onclick="emailForm.removeWidget(event)" />Delete&nbsp;this<br
											clear="all" style="margin-bottom: 0px;" />

										</button>
										
											<br />
											<input type="hidden"
												name="_emails[0].bulkmail" />
											<input type="checkbox"
												name="emails[0].bulkmail"
												id="emails[0].bulkmail"
												value="true"
												
												title="Allow announcements"></input>
											<label for="emails[0].bulkmail">I'd like to receive
											announcements</label>
											<em class="fieldError"></em>
										</td>
									</tr>

								
							</tbody>
							<tfoot>
								<tr>
									<td>
									<button title="Add Email" type="button" value="Add email"
										onClick="emailForm.addWidget(jsbal.byId('tbodyEmails'))">Add
									Email</button>
									
										<em class="fieldError"></em>
									</td>
								</tr>

							</tfoot>
						</table>
						</td>
					</tr>

				</tbody>
			</table>
			</div>
			<!-- Phone -->

			<div title="Phones">
			<table style="width: 100%; background-color: #d0d0d0">
				<tbody>
					<tr>
						<td valign="top">Phone<em style="color: red;">*</em></td>
						<td>
						<table id="phones" style="margin-bottom: 25px" border="1">
							<tbody>

								
							</tbody>
							<tfoot>
								<tr>
									<td>
										<button type="button" onclick="phoneForm.addWidget(jsbal.byId('phones'))">Add phone number</button>
									</td>
								</tr>
							</tfoot>

			
						</table>
						</td>
					</tr>
				</tbody>
			</table>
			</div>
			<!-- Address -->
			<div title="Addresses">
			<table style="width: 100%; background-color: #d0d0d0">

				<tbody>
					<tr>
					  <td>
						<table style="margin-bottom: 25px" border="1">
							<tbody>
								
									<tr id="addresses[0]">
										<td>
										<table>
											<tbody>

												<tr>
													<td>
													<table border="0">
														<tbody>
															<tr>
																
																	<td><label for="addresses[0].address.locationTypeId">Usage<em
																		style="color: red;">*</em></label></td>
																	<td><select name="addresses[0].address.locationTypeId"
																		id="addresses[0].address.locationTypeId">
																		
																			
																				
																				
																					<option value="1">Home</option>

																				
																			
																		
																			
																				
																				
																					<option value="2">Work</option>
																				
																			
																		
																			
																				
																				
																					<option value="3">Main</option>
																				
																			
																		
																			
																				
																				
																					<option value="4">Other</option>
																				
																			
																		
																			
																				
																				
																					<option value="5">Billing</option>
																				
																			
																		
																	</select></td>
																	<em class="fieldError"></em>
																
															</tr>

															<tr>
																
																	<td><label for="addresses[0].address.name">Name&nbsp;for&nbsp;address<span
																		style="font-size: smaller"><em
																		style="color: red;">*</em><br />
																	(eg&nbsp;My&nbsp;House)</span></label></td>
																	<td><input id="addresses[0].address.name"
																		name="addresses[0].address.name" value=''
																		size='64' maxlength='255'> <em
																		class="fieldError"></em></td>
																
															</tr>

															<tr>
																
																	<td><label for="addresses[0].address.supplementalAddress1">Addressee&nbsp;(Line&nbsp;1)</label>
																	</td>
																	<td><input id="addresses[0].address.supplementalAddress1"
																		name="addresses[0].address.supplementalAddress1" value=''
																		maxlength='96' size='64'> <em
																		class="fieldError"></em></td>
																
															</tr>
															<tr>
																
																	<td><label for="addresses[0].address.supplementalAddress2">Addressee&nbsp;(Line&nbsp;2)</label>

																	</td>
																	<td><input id="addresses[0].address.supplementalAddress2"
																		name="addresses[0].address.supplementalAddress2" value=''
																		maxlength='96' size='64'> <em
																		class="fieldError"></em></td>
																
															</tr>
															<tr>
																
																	<td><label for="addresses[0].address.supplementalAddress3">Addressee&nbsp;(Line&nbsp;3)</label>
																	</td>
																	<td><input id="addresses[0].address.supplementalAddress3"
																		name="addresses[0].address.supplementalAddress3" value=''
																		maxlength='96' size='64'> <em
																		class="fieldError"></em></td>

																
															</tr>

															<tr>
																
																	<td><label for="addresses[0].address.streetAddress">Street
																	Address</label></td>
																	<td><input id="addresses[0].address.streetAddress"
																		name="addresses[0].address.streetAddress" value=''
																		maxlength='96' size='64'> <em
																		class="fieldError"></em></td>
																
															</tr>

															<tr>
																<td>

																	<label for="addresses[0].address.streetNumber">Street Number</label>
																</td>
																<td>
																<table>
																	<tbody>
																		<tr>
																			<td>
																				<input id="addresses[0].address.streetNumber"
																					name="addresses[0].address.streetNumber" value=''
																					size='10' maxlength='10' />

																				<em class="fieldError"></em>
																			</td>
																			<td>
																				<label for="addresses[0].address.streetNumberSuffix">A-Z</label>
																			</td>
																			<td>
																				<input id="addresses[0].address.streetNumberSuffix"
																					name="addresses[0].address.streetNumberSuffix" value=''
																					maxlength='2' size='2' type='text'>
																				<em class="fieldError"></em>

																			</td>
																		</tr>
																	</tbody>
																</table>

																</td>
															</tr>

															<tr>
																<td>

																	<label for="addresses[0].address.streetName">Street name</label>
																</td>

																<td>
																<table>
																	<tbody>
																		<tr style='vertical-align:bottom'>
																			<td>
																				<p style='margin:0px;font-size:smaller'><label for="addresses[0].address.streetNumberPredirectional"
																					title='Directional Prefix'>Dir. Prefix</label></p>

																			
																				<!--   -->
																				<select id="addresses[0].address.streetNumberPredirectional"
																					name="addresses[0].address.streetNumberPredirectional" style="width: 60px">
																					
																						
																							
																							
																								<option value=''></option>
																							
																						
																					
																						
																							
																							
																								<option value='N'>North</option>
																							
																						
																					
																						
																							
																							
																								<option value='S'>South</option>
																							
																						
																					
																						
																							
																							
																								<option value='E'>East</option>
																							
																						
																					
																						
																							
																							
																								<option value='W'>West</option>

																							
																						
																					
																				</select>
																				<em class="fieldError"></em>
																			</td>
																			<td>
																				<input id="addresses[0].address.streetName"
																					name="addresses[0].address.streetName" value=''
																					maxlength='96' size='48'>
																				<em class="fieldError"></em>
																			</td>
																			<td>
																				<p style='margin:0px;font-size:smaller;'><label for="addresses[0].address.streetType">Type</label></p>

																			
																				<input id="addresses[0].address.streetType"
																					name="addresses[0].address.streetType" value=''
																					maxlength='8' size='8'>
																				<em class="fieldError"></em>
																			</td>
																			<td>
																				<p style='margin:0px;font-size:smaller;'><label for="addresses[0].address.streetNumberPostdirectional"
																					title="Directional suffix">Dir. Suffix</label></p>
																			
																				
																				<select id="addresses[0].address.streetNumberPostdirectional"
																					name="addresses[0].address.streetNumberPostdirectional" style="width: 60px">
																					
																						
																							
																							
																								<option value=''></option>
																							
																						
																					
																						
																							
																							
																								<option value='N'>North</option>

																							
																						
																					
																						
																							
																							
																								<option value='S'>South</option>
																							
																						
																					
																						
																							
																							
																								<option value='E'>East</option>
																							
																						
																					
																						
																							
																							
																								<option value='W'>West</option>
																							
																						
																					
																				</select>
																				<em class="fieldError"></em>
																			</td>

																		</tr>

																	</tbody>
																</table>
																</td>
															</tr>
															<tr>
																<td>
																	<label for="addresses[0].address.suburb">Suburb</label>
																</td>

																<td>
																	<input id="addresses[0].address.suburb"
																		name="addresses[0].address.suburb" value=''
																		maxlength='64' size='64'>
																	<em class="fieldError"></em>
																</td>
															</tr>
															<tr>
																<td>
																	<label for="addresses[0].address.city">City<em
																		style="color: red;">*</em></label>

																</td>
																<td>
																<table>
																	<tbody>
																		<tr>
																			<td>
																				<input id="addresses[0].address.city"
																					name="addresses[0].address.city" value=''
																					maxlength='64' size='64'>
																				
																			</td>
																			<td>

																				<label for="addresses[0].address.postalCode">Post&nbsp;code<em
																					style="color: red;">*</em></label>
																			</td>
																			<td>
																				<input id="addresses[0].address.postalCode"
																					name="addresses[0].address.postalCode" value=''
																					maxlength='4' size='4' />
																				
																			</td>
																		</tr>
																	</tbody>

																</table>
																</td>
															</tr>
														</tbody>
													</table>
													</td>
													<td style="vertical-align: top;">
													<button type="button"
														onclick="addressForm.removeWidget(event)"
														>Delete&nbsp;this</button>

													<!-- button for delete goes here --></td>
												</tr>
											</tbody>
										</table>
										</td>
									</tr>
								
							</tbody>
							<tfoot>
								<tr>

									<td>
									<button type="button" onclick="addressForm.addWidget(event)">Add
									Address</button>
									
										<em class="fieldError"></em>
									</td>
								</tr>
							</tfoot>
						</table>
						</td>

					</tr>
				</tbody>
			</table>
			<!-- End of Addresses tab --></div>
			<div title='My Account'>
						<table style='background-color:#d0d0d0;width:100%'><tbody><tr><td>
						<p style="background-color:#d0d0d0">Not implemented.</p>
						</td></tr></tbody>

			</table>
			</div>
			<div title='My Household'>
						<table style='background-color:#d0d0d0;width:100%'><tbody><tr><td>
						<p style="background-color:#d0d0d0">Not implemented.</p>
						</td></tr></tbody>
			</table>
			</div>

			<div title='My Work'style='background-color:#d0d0d0;'>
				<table style='background-color:#d0d0d0;width:100%'>
					<tbody>
						
						<tr>
						<td>
						Wellington People&#039;s Centre
						</td>
						<td><button type='button' 
							
							>View</button></td>

						<td><button type='button' 
							
							>Edit</button></td>
						<td><button type='button' 
							
							>Delete</button></td>
						</tr>
						
					</tbody>
				</table>
				<button type='button' 
					
					onclick='onFindOrCreateOrganisation(event);' >Find/Create</button>
			</div>

			<div title="Memberships" >			
				<div title="I hold">
				<table style='background-color:#d0d0d0;width:100%'><tbody>
					<tr>
						<td>
						
						
						  <p style="background-color:#d0d0d0">There are currently no memberships in your profile.</p>
						
						
						
						</td>
					</tr>

				</tbody>
				</table>
			<!-- end We hold -->
			</div>
			
		
			</div>
			<div title="My Relationships">
			
			
				<table style="background-color: #d0d0d0;width:100%">
					<thead>
						<tr>

							<td><p style="background-color: #d0d0d0">This profile has no relationships</p>
							<button type='button'>Create Relationship</button></td>
						</tr>
					</thead>
				</table>
			
			
			
			</div>
			<!-- End of TabControl --></div>
			<table style="width: 100%; background-color: #d0d0d0">

				<tfoot>
					<tr>
						<td colspan="2">
							<em class="fieldError"></em>
						
						<button id='btnSubmit' type="submit" value="Save"
							title="Save profile Now">Save&nbsp;Profile</button>&nbsp;
						<button type="submit" value="Cancel" title="Cancel" name="_cancel">Cancel</button>
						</td>

					</tr>
				</tfoot>
			</table>
			</form>
			</td>
		</tr>
	</tbody>
</table>
<div style='display:none'>
<div jsbal-template="findOrCreateOrganisation" jsbal-widget="jsbal.widget.OptionDialog"
	title="Find/Create Organisation"
	type='input'
	buttons="yesnocancel"
	yescaption="Use" onyes="function(event){}"
	nocaption="Create" onno="function (event){onCreateOrganisation(event);}"
	help="text:Enter the name of the organisation if the organisation appears in 
		the list you may use that organisation. If the organisation is not available you may create it.">

	<label for='newOrgName' widget-id='newOrgLabel' style='overflow:hidden;width:100%'>Organisation</label>
	<script type="text/javascript">
	function updateOrganisations(evt){
		if(typeof console!='undefined')console.info("decrease newOrgName.searchRqCount");
		if(0==--window.txtNewOrgName.searchRqCount){
			if(typeof console!='undefined')console.info("refresh org'n list");
			var newOrgLabel=jsbal.byId('newOrgLabel');
			var v=window.txtNewOrgName.value;
			newOrgLabel.innerHTML="Organisation"+(v?(' - Find like "'+v+'"'):'');
			clearInterval(window.txtNewOrgName.timerHandle);
			--window.txtNewOrgName.tCount;
			window.txtNewOrgName.timerHandle=undefined;
			var organisationSearchList=jsbal.widget.Widget.getWidgetById('$findOrCreateOrganisation/findOrCreateOrganisation/organisationSearchList');
			if (!organisationSearchList)
				throw TypeError('organisationSearchList must not be null');
			organisationSearchList.requery();
			
		};
	};
	function scheduleSearch(event){
		if(!('txtNewOrgName' in window)){
			if(typeof console!='undefined')console.info("define newOrgName");
			window.txtNewOrgName=jsbal.byId('txtNewOrgName');
		}
		if(typeof console!='undefined')console.info("define newOrgName.searchRqCount");
		window.txtNewOrgName.searchRqCount=3;
		if(typeof window.txtNewOrgName.timerHandle=='undefined'){
			if(typeof console!='undefined')console.info("define newOrgName.timerhandle");
			window.txtNewOrgName.timerHandle=setInterval("updateOrganisations();", 1000);
			window.txtNewOrgName.tCount=(window.txtNewOrgName.tCount||0)+1;
			if(window.txtNewOrgName.tCount>9)
			  alert("too many intervals");
		}
		
	};
	</script>
   	<input name="newOrgName" widget-id="txtNewOrgName" style='width:400px;display:block;'
   	   onkeyup='scheduleSearch(event)'>
   	<div jsbal-widget='jsbal.widget.TreeView'
   		widget-id='organisationSearchList' 
   		style='margin-top:8px;height:300px;width:400px;'
   		tree-model="xhr:{service:new OrganisationSearchModel('/iBffsdb/wpcosd/contactService.action'),
   		 params:function(){return {service:'findOrganisationByPattern',pattern:jsbal.byId('txtNewOrgName').value};}}"
   		 icon="/iBffsdb/images/contact16"
   		 useglyph='true'
   		 glyphaxis='vertical'
   		 iconMap=
   		 	"{property:'contactType',map:{Individual:0,Household:1,Organisation:2}}"
   	></div>
</div>

<div jsbal-template='createOrganisation' jsbal-widget="jsbal.widget.OptionDialog"
	title="Create a new Organisation"
	type='input'
	buttons='okcancel'
	onok='saveOrganisation(event);'
	onopen='openNewOrganisation();'
	help='text:Enter the details of the organisation'>
	<iframe widget-id="ifrNewOrganisation" style='width:810px;height:400px'>
	</iframe>
	

</div>
</div>
<script type='text/javascript'>
	function onFindOrCreateOrganisation(event){
		if(typeof wgtFindOrCreateOrganisation=='undefined'){
			var tplFindOrCreateOrganisation=jsbal.widget.Widget.getTemplateById('$findOrCreateOrganisation');
			if (!tplFindOrCreateOrganisation)
				throw new TypeError('tplFindOrCreateOrganisation must not be null');
				
			wgtFindOrCreateOrganisation=tplFindOrCreateOrganisation.createInstance('findOrCreateOrganisation');
		}
		if (!wgtFindOrCreateOrganisation)
			throw new TypeError('wgtCreateOrganisation must not be null');
		wgtFindOrCreateOrganisation.setVisible(true);
	}
	function onCreateOrganisation(event){
		if(typeof wgtCreateOrganisation=='undefined'){
			var tplCreateOrganisation=jsbal.widget.Widget.getTemplateById('$createOrganisation');
			if (!tplCreateOrganisation)
				throw new TypeError('tplCreateOrganisation must not be null');
				
			wgtCreateOrganisation=tplCreateOrganisation.createInstance();
		}
		if (!wgtCreateOrganisation)
			throw new TypeError('wgtCreateOrganisation must not be null');
		wgtCreateOrganisation.setVisible(true);
	}

	function openNewOrganisation(event){
		var ifrNewOrg=jsbal.byId('ifrNewOrganisation');
		ifrNewOrg.name='ifrNewOrg';
		var profile=1;
		var src='/iBffsdb/wpcosd/contactService.action?service=newOrganisationForm';
		src+='&profileId='+escape(profile); 
		ifrNewOrg.src=src; 
	}
	function saveOrganisation(evt){
		var ifrNewOrg=jsbal.byId('ifrNewOrganisation');
		var frmOrg=jsbal.byId('frmOrgn',ifrNewOrg.contentDocument);
		var profile=1;
		
		var url='/iBffsdb/wpcosd/contactService.action?service=newOrganisationForm';
		url+='&profileId='+escape(profile); 
		
		jsbal.xhrRequest(JSBAL.XHR_POST, url, 'text', false, false, 
				function load(){
			 		window.location.reload();
				},
				function error(){}, 
				function done(){}, 
				frmOrg );
	}
	function tickleServer(){
		var url='/iBffsdb/wpcosd/contactService.action?service=tickle';
		jsbal.xhrRequest(JSBAL.XHR_GET, url, 'text', false, true, 
				function load(){},
				function error(){}, 
				function done(){} );
		
	}
	window.tickleInterval=setInterval('tickleServer()', 1200000);
</script>			     		
</body>
</html>

Actual Results:  
]>