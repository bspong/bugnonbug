Regxpcom segv during build under FreeBSD 5.0
Most recent FreeBSD 5.0-CURRENT kernel and userland from 07-07-2002. During
build of Mozilla 1.0 it crash here:

gmake[2]: Entering directory
`/usr/ports/www/mozilla/work/mozilla/xpfe/bootstrap'
../../config/nsinstall -R -m 755 mozilla-bin ../../dist/bin
../../config/nsinstall -R mozilla.1 ../../dist/man/man1
../../config/nsinstall -R mozilla ../../dist/bin
gmake[2]: Leaving directory `/usr/ports/www/mozilla/work/mozilla/xpfe/bootstrap'
gmake[2]: Entering directory
`/usr/ports/www/mozilla/work/mozilla/embedding/browser/gtk/tests'
../../../../config/nsinstall -R -m 755 TestGtkEmbed TestGtkEmbedNotebook
TestGtkEmbedSocket TestGtkEmbedChild ../../../../dist/bin
gmake[2]: Leaving directory
`/usr/ports/www/mozilla/work/mozilla/embedding/browser/gtk/tests'
gmake[1]: Leaving directory `/usr/ports/www/mozilla/work/mozilla'
/usr/bin/sed -
e "s;@PREFIX@;/usr/X11R6;g" /usr/ports/www/mozilla/files/mozilla.sh
>/usr/ports/www/mozilla/work/mozilla/mozilla
(cd /usr/ports/www/mozilla/work/mozilla/dist/bin; /usr/bin/env
LD_LIBRARY_PATH=. MOZILLA_FIVE_HOME=. ./regxpcom; echo
skin,install,select,classic/1.0 >> chrome/installed-chrome.txt; echo
locale,install,select,en-US >> chrome/installed-chrome.txt; /usr/bin/env
LD_LIBRARY_PATH=. MOZILLA_FIVE_HOME=. ./regchrome)
[1] 92732 Segmentation fault (core dumped)


GDB shows:

Core wa generated by `regxpcom'.
Program terminated with signal 11, Segmentation fault.
Reading symbol from ./libxpcom.so...(no debugging symbol found)...done.
Loaded symbol for ./libxpcom.so
Reading symbol from ./libplds4.so...(no debugging symbol found)...done.
Loaded symbol for ./libplds4.so
Reading symbol from ./libplc4.so...(no debugging symbol found)...done.
Loaded symbol for ./libplc4.so
Reading symbol from ./libnspr4.so...(no debugging symbol found)...done.
Loaded symbol for ./libnspr4.so
Reading symbol from /usr/lib/libstdc++.so.4...(no debugging symbol
found)...done.
Loaded symbol for /usr/lib/libstdc++.so.4
Reading symbol from /usr/lib/libm.so.2...(no debugging symbol found)...done.
Loaded symbol for /usr/lib/libm.so.2
Reading symbol from /usr/lib/libc_r.so.5...(no debugging symbol found)...done.
Loaded symbol for /usr/lib/libc_r.so.5
Reading symbol from /usr/lib/libc.so.5...(no debugging symbol found)...done.
Loaded symbol for /usr/lib/libc.so.5
Reading symbol
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libjsloader.so...
(no debugging symbol found)...done.
Loaded symbol
for /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libjsloader.so
Reading symbol from ./libmozjs.so...(no debugging symbol found)...done.
Loaded symbol for ./libmozjs.so
Reading symbol
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libxpconnect.so...
(no debugging symbol found)...done.
Loaded symbol
for /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libxpconnect.so
Reading symbol
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libcaps.so...(no
debugging symbol found)...done.
Loaded symbol
for /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libcaps.so
Reading symbol from ./libmozz.so...(no debugging symbol found)...done.
Loaded symbol for ./libmozz.so
Reading symbol
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libpref.so...(no
debugging symbol found)...done.
Loaded symbol
for /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libpref.so
Reading symbol
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libnecko.so...(no
debugging symbol found)...done.
Loaded symbol
for /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libnecko.so
Reading symbol from /usr/libexec/ld-elf.so.1...(no debugging symbol
found)...done.
Loaded symbol for /usr/libexec/ld-elf.so.1
#0 0x2839e610 in nsXPCException::CanGetProperty(nsID const*, unsigned short
const*, char**) ()
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libxpconnect.so
(gdb) bt
#0 0x2839e610 in nsXPCException::CanGetProperty(nsID const*, unsigned short
const*, char**) ()
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libxpconnect.so
#1 0x281295b1 in XPTC_InvokeByIndex () from ./libxpcom.so
#2 0x283b147a in XPCWrappedNative::CallMethod(XPCCallContext&,
XPCWrappedNative::CallMode) ()
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libxpconnect.so
#3 0x283b72a5 in XPC_WN_CallMethod(JSContext*, JSObject*, unsigned, long*,
long*) ()
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libxpconnect.so
#4 0x28326f9a in js_Invoke () from ./libmozjs.so
#5 0x28327204 in js_InternalInvoke () from ./libmozjs.so
#6 0x2833b0e9 in js_TryMethod () from ./libmozjs.so
#7 0x2833a12f in js_DefaultValue () from ./libmozjs.so
#8 0x2835576c in js_ValueToString () from ./libmozjs.so
#9 0x283215f5 in js_ReportUncaughtException () from ./libmozjs.so
#10 0x28308131 in JS_ExecuteScript () from ./libmozjs.so
#11 0x282f086a in mozJSComponentLoader::GlobalForLocation(char const*,
nsIFile*) ()
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libjsloader.so
#12 0x282efeaf in mozJSComponentLoader::ModuleForLocation(char const*,
nsIFile*) ()
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libjsloader.so
#13 0x282ef6d4 in mozJSComponentLoader::AttemptRegistration(nsIFile*, int) ()
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libjsloader.so
#14 0x282ef49c in mozJSComponentLoader::AutoRegisterComponent(int, nsIFile*,
int*) ()
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libjsloader.so
#15 0x282ef01f in mozJSComponentLoader::RegisterComponentsInDir(int, nsIFile*)
()
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libjsloader.so
#16 0x282eeef8 in mozJSComponentLoader::AutoRegisterComponents(int, nsIFile*) ()
from /usr/ports/www/mozilla/work/mozilla/dist/bin/components/libjsloader.so
#17 0x28107d9e in nsComponentManagerImpl::AutoRegisterImpl(int, nsIFile*, int)
() from ./libxpcom.so
#18 0x281081f0 in nsComponentManagerImpl::AutoRegister(nsIFile*) ()
from ./libxpcom.so
#19 0x080498c0 in ?? ()
#20 0x08049251 in ?? ()

I'm willing to try anything requested to narrow this down further if this is an
unknown problem.
