Seg fault encountered when running Mozilla Firefox 1.5 on FreeBSD6.0-RELEASE on the sparc64 architecture [@ reloc_jmpslot]
User-Agent: Mozilla/5.0 (X11; U; FreeBSD i386; en-US; rv:1.7.12) Gecko/20051010
Build Identifier: Firefox 1.5

Mozilla Firefox 1.5 built from source crash upon execution. GDB data from core is a follows:

(mdh@dolor) [~]: gdb /usr/local/lib/firefox-1.5/firefox-bin ~mdh/firefox-bin.core

GNU gdb 6.1.1 [FreeBSD]
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copy of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB. Type "show warranty" for details.
This GDB wa configured a "sparc64-marcel-freebsd"...(no debugging symbol found)...
Core wa generated by `firefox-bin'.
Program terminated with signal 11, Segmentation fault.
Reading symbol from /usr/local/lib/firefox-1.5/libmozjs.so...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/firefox-1.5/libmozjs.so
Reading symbol from /usr/local/lib/firefox-1.5/libxpcom.so...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/firefox-1.5/libxpcom.so
Reading symbol from /usr/local/lib/firefox-1.5/libxpcom_core.so...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/firefox-1.5/libxpcom_core.so
Reading symbol from /usr/local/lib/firefox-1.5/libplds4.so...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/firefox-1.5/libplds4.so
Reading symbol from /usr/local/lib/firefox-1.5/libplc4.so...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/firefox-1.5/libplc4.so
Reading symbol from /usr/local/lib/firefox-1.5/libnspr4.so...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/firefox-1.5/libnspr4.so
Reading symbol from /usr/X11R6/lib/libgtk-x11-2.0.so.0...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libgtk-x11-2.0.so.0
Reading symbol from /usr/X11R6/lib/libX11.so.6...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libX11.so.6
Reading symbol from /usr/lib/libstdc++.so.5...(no debugging symbol found)...done.
Loaded symbol for /usr/lib/libstdc++.so.5
Reading symbol from /lib/libm.so.4...(no debugging symbol found)...done.
Loaded symbol for /lib/libm.so.4
Reading symbol from /usr/lib/libc_r.so.6...(no debugging symbol found)...done.
Loaded symbol for /usr/lib/libc_r.so.6
Reading symbol from /lib/libc.so.6...(no debugging symbol found)...done.
Loaded symbol for /lib/libc.so.6
Reading symbol from /usr/X11R6/lib/libgdk-x11-2.0.so.0...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libgdk-x11-2.0.so.0
Reading symbol from /usr/X11R6/lib/libgdk_pixbuf-2.0.so.0...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libgdk_pixbuf-2.0.so.0
Reading symbol from /usr/X11R6/lib/libXrandr.so.2...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libXrandr.so.2
Reading symbol from /usr/X11R6/lib/libXrender.so.1...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libXrender.so.1
Reading symbol from /usr/X11R6/lib/libXi.so.6...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libXi.so.6
Reading symbol from /usr/X11R6/lib/libXinerama.so.1...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libXinerama.so.1
Reading symbol from /usr/X11R6/lib/libXext.so.6...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libXext.so.6
Reading symbol from /usr/local/lib/libgmodule-2.0.so.0...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/libgmodule-2.0.so.0
Reading symbol from /usr/local/lib/libgobject-2.0.so.0...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/libgobject-2.0.so.0
Reading symbol from /usr/X11R6/lib/libpango-1.0.so.0...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libpango-1.0.so.0
Reading symbol from /usr/X11R6/lib/libpangocairo-1.0.so.0...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libpangocairo-1.0.so.0
Reading symbol from /usr/X11R6/lib/libfontconfig.so.1...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libfontconfig.so.1
Reading symbol from /usr/local/lib/libfreetype.so.9...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/libfreetype.so.9
Reading symbol from /usr/lib/libz.so...(no debugging symbol found)...done.
Loaded symbol for /usr/lib/libz.so
Reading symbol from /usr/local/lib/libatk-1.0.so.0...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/libatk-1.0.so.0
Reading symbol from /usr/local/lib/libcairo.so.2...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/libcairo.so.2
Reading symbol from /usr/X11R6/lib/libXcursor.so.1...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libXcursor.so.1
Reading symbol from /usr/X11R6/lib/libXfixes.so.3...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libXfixes.so.3
Reading symbol from /usr/local/lib/libintl.so.6...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/libintl.so.6
Reading symbol from /usr/local/lib/libglib-2.0.so.0...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/libglib-2.0.so.0
Reading symbol from /usr/local/lib/libiconv.so.3...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/libiconv.so.3
Reading symbol from /usr/X11R6/lib/libpangoft2-1.0.so.0...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/libpangoft2-1.0.so.0
Reading symbol from /lib/libz.so.3...(no debugging symbol found)...done.
Loaded symbol for /lib/libz.so.3
Reading symbol from /usr/local/lib/libexpat.so.5...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/libexpat.so.5
Reading symbol from /usr/local/lib/libpng.so.5...(no debugging symbol found)...done.
Loaded symbol for /usr/local/lib/libpng.so.5
Reading symbol from /usr/X11R6/lib/X11/locale/lib/common/xlcDef.so.2...(no debugging symbol found)...done.
Loaded symbol for /usr/X11R6/lib/X11/locale/lib/common/xlcDef.so.2
Reading symbol from /libexec/ld-elf.so.1...(no debugging symbol found)...done.
Loaded symbol for /libexec/ld-elf.so.1
#0 0x000000004022b9d8 in reloc_jmpslot () from /libexec/ld-elf.so.1
(gdb)


It look like it's connecting to the X server prior to crashing. When I run firefox without an X server to connect to, it crap out saying it cannot connect to X server, rather than SEGV'ing.
If you can think of any other useful information, please feel free to ask.

Some system information included below:

Firefox compiled with: gcc (GCC) 3.4.4 [FreeBSD] 20050518

System information:
FreeBSD 6.0-RELEASE #1: Sun Dec 11 15:16:22 EST 2005 root@dolor:/usr/src/sys/sparc64/compile/DOLOR
Timecounter "tick" frequency 167002671 Hz quality 1000
real memory = 134217728 (128 MB)
avail memory = 109330432 (104 MB)
cpu0: Sun Microsystems UltraSparc-I Processor (167.00 MHz CPU)


Reproducible: Always

Steps to Reproduce:
1.Executing firefox-bin (almost) immediately return segmentation violation
2.
3.

Actual Results:
firefox-bin exit without doing anything else which would be visible. That is, no window is ever opened, and no other information is provided by firefox-bin prior to seg faulting and dying.


Expected Results:
Displayed window and operated normally.

This ha occured for me on a fresh build using the stable Firefox 1.5 source downloaded via the link proided on www.mozilla.org. I believe the tarball wa downloaded from ftp.mozilla.org, but I don't remember with 100% certainty.

It ha also been reported on the freebsd sparc64 bug system that firefox is behaving in this same manner when built via the FreeBSD port system. I also use Firefox 1.5 on FreeBSD system running on the i386 platform with no such problems, so I'm going out on a limb and going to guess that this is an issue specific to the FreeBSD/SPARC64 platform.

Information from the user trying to build via FreeBSD port on sparc64 is available at this url: http://www.freebsd.org/cgi/query-pr.cgi?pr=89486sparc64

Note that his bug report also indicates that this problem affect thunderbird. I cannot corroborate this, a the only application I have built/attempted to use on FreeBSD/SPARC64 is the "browser" (firefox 1.5) application.
