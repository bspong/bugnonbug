FF3 Beta: open link in new window/tab prompts to save file
User-Agent:       Mozilla/5.0 (X11; U; Linux i686 (x86_64); en-GB; rv:1.9b5) Gecko/2008032619 Firefox/3.0b5
Build Identifier: Mozilla/5.0 (X11; U; Linux i686 (x86_64); en-GB; rv:1.9b5) Gecko/2008032619 Firefox/3.0b5

A strange bug when using Firefox 3 Beta 5 (I have also confirmed that it persists with Beta 4 and when running Firefox in safe mode.)
In a very specific situation, right-clicking on a link and selecting "open in new window" or "open in new tab", instead of displaying what's requested, launches a save file dialogue.

I suspect this may in some way be related to bug 409192, which causes me to have nothing in the applications dialogue, meaning I can't control what applications are used by Firefox to open files.

Strangely, this bug seems to come and go. For long periods everything works fine, then it starts playing up and continues causing problems for days on end.


Reproducible: Sometimes

Steps to Reproduce:
1. Visit http://www.suffolkcamra.co.uk/pubs/pub/2346
2. Click on the picture of a pub under the caption "picture gallery"
3. Right-click on the smaller picture that appears and select "open link in new window"

Actual Results:  
New window opens, with dialogue asking what to do with the cgi file

Expected Results:  
Should open a new window and display the picture generated by the cgi script.

The link concerned is slightly more complicated than usual, as it points at a script which picks a photograph out of a database and displays it using Lightbox. The problem only seems to occur with links like this, other links open OK all the time. Opening in a new window (when it works) bypasses the lightbox display and just displays the picture.

There is an error message generated when doing the right-click and also when selecting "open in new window", but as this is generated when right-clicking on other links, is possibly irrelevant.
*** e = [Exception... "Component returned failure code: 0x80570016 (NS_ERROR_XPC_GS_RETURNED_FAILURE) [nsIJSCID.getService]"  nsresult: "0x80570016 (NS_ERROR_XPC_GS_RETURNED_FAILURE)"  location: "JS frame :: chrome://browser/content/utilityOverlay.js :: getShellService :: line 285"  data: no]